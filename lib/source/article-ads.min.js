const isBrowser=new Function("try {return this===window;}catch(e){ return false;}"),hexoAdsenseConfig=JSON.parse(document.getElementById("hexo-adsense-config").textContent);function insertAfter(a,b){if(b&&a){let c=b.parentNode;c.lastChild==b?c.appendChild(a):c.insertBefore(a,b.nextSibling)}else console.error("cannot insert element")}function replaceWith(a,b){if(!b.parentNode){console.log(b,"parent null");let a=document.createElement("div");a.appendChild(b)}else b.parentNode.replaceChild(a,b)}let createElementFromHTML=function(a){if(a instanceof HTMLElement)return a;var b=document.createElement("div");return b.innerHTML=a.trim(),b.firstChild};function oldMethod(){let a=document.getElementsByTagName("article"),b=document.getElementById("hexo-adsense-ads-content");if(b&&b.length&&a&&a.length){let c=a.item(0).getElementsByTagName("br");if(0<c.length)return replaceWith(b,c.item(0));let d=a.item(0).querySelectorAll("h2,h3,h4,h5");if(d&&0<d.length)return insertAfter(b,d.item(0))}}function ranumb(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function newMethod(){const a=document.getElementById("hexo-adsense-hidden");let b=a.querySelectorAll("[hexo-adsense=\"ads-content\"]");const c=document.querySelectorAll("article");if(0<c.length&&0<b.length){let d;if(1==c.length){console.log("webpage is post");let e=c.item(0);const f=e.querySelectorAll("*[hexo-adsense-fill]");if(0<f.length)for(let a=0;a<f.length;a++){const c=f[a];"undefined"!=typeof b[a]&&c.appendChild(b[a])}if(b=a.querySelectorAll("[hexo-adsense=\"ads-content\"]"),0<b.length){const a=e.querySelectorAll("h1,h2,h3,h4,h5,h6,pre");if(0<a.length){let c=Array.apply(null,{length:a.length}).map(Number.call,Number);for(let e=0;e<b.length;e++){d=b[e];const f=shuffleArr2(c),g=f.next().value;if("number"==typeof g){const b=a.item(g);insertAfter(createElementFromHTML(d),b)}}}}if(b=a.querySelectorAll("[hexo-adsense=\"ads-content\"]"),0<b.length){const a=e.querySelectorAll("br,hr");if(0<a.length){let c=Array.apply(null,{length:a.length}).map(Number.call,Number);const e=shuffleArr2(c);for(let c=0;c<b.length;c++){d=b[c];const f=e.next().value;if("number"==typeof f){const b=a.item(f);if(["blockquote","img","a","pre","code","em","strong","i","u"].includes(b.parentNode.tagName.toLowerCase())){c--;continue}replaceWith(createElementFromHTML(d),b)}}}}}else{console.log("webpage is not post");let a=Array.apply(null,{length:c.length}).map(Number.call,Number);const e=shuffleArr2(a);for(let a=0;a<b.length;a++){d=b[a];const f=e.next().value;if("number"==typeof f){const a=c.item(f);a.appendChild(createElementFromHTML(d))}}}adsensePush()}}function eventMethod(){document.addEventListener("DOMContentLoaded",function(){var a=document.querySelector("a[name=more]");a.insertAdjacentHTML("afterend","<div class=\"adsense-after-break\">"+" [replace this with code from the last step] "+"</div>"),(adsbygoogle=window.adsbygoogle||[]).push({})})}function shuffleArr(a){for(var b,c=a.length,d=0;c--;)d=Math.floor(Math.random()*(c+1)),b=a[c],a[c]=a[d],a[d]=b;return a}function*shuffleArr2(a){for(var b=a.length;b--;)yield a.splice(Math.floor(Math.random()*(b+1)),1)[0]}function adsensePush(){for(let a=0;a<document.querySelectorAll("[hexo-adsense=\"ads-content\"]").length;a++)(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:hexoAdsenseConfig.pub})}isBrowser()?(window.__tcfapi=(a,b,c)=>{"checkConsent"===a&&c(!0),"addEventListener"===a&&c({eventStatus:"tcloaded",gdprApplies:!1},!0)},"function"==typeof document.addEventListener?document.addEventListener("DOMContentLoaded",newMethod):"function"==typeof window.attachEvent?window.attachEvent("onload",newMethod):window.onload=newMethod):module.exports={replaceWith,insertAfter};
